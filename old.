import csv
import matplotlib.pyplot as plt


f = open('age.csv')
data=csv.reader(f)

eve=[]
yo=0
ol=0

name=input('고령화 비율을 알고싶은 지역의 이름을 입력하세요: ')

for row in data:
    if name in row[0]:
        for i in row[3:]:
            eve.append(int(i.replace(',','')))
        for i in row[3:68]:
            yo=yo+int(i.replace(',',''))
        for i in row[69:]:
            ol=ol+int(i.replace(',',''))
            
        axx = yo + ol
            
plt.style.use('ggplot')
plt.rc('font', family='malgun Gothic')
plt.rcParams['axes.unicode_minus']=False
plt.title(name +' 의 인구 구조')
plt.plot(eve)
plt.show()

plt.title(name +' 의 고령화 비율')
plt.pie([yo,ol],labels=['65세 미만','65세 이상'],autopct='%.1f%%',explode=(0,0.1))
plt.legend()
plt.show()

if (ol/axx*100) >=20:
    print(name + "은 20% 이상으로 초고령 사회입니다")
elif (ol/axx*100) >=14:
    print(name + "은 14% 이상으로 고령 사회입니다")
elif (ol/axx*100) >=7:
    print(name + "은 7% 이상으로 고령화 사회입니다")
